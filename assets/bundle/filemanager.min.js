var filemanager={baseUrl:"",ckBrowseUrl:""};
function tinyMceCallback(){var e=parseInt(tinyMCE.majorVersion),n=window,i=document,t=i.documentElement,a=i.getElementsByTagName("body")[0],r=n.innerWidth||t.clientWidth||a.clientWidth,l=n.innerHeight||t.clientHeight||a.clientHeight,o=filemanager.baseUrl+"?editor=tinyMCE&file_type=image";if(4===e)tinyMCE.activeEditor.windowManager.open({file:o,title:"Filemanager",width:.8*r,height:.8*l,resizable:"yes",close_previous:"no"});else{if(5!==e)throw"TinyMCE version:"+e+" is not supported";tinyMCE.activeEditor.windowManager.openUrl({title:"Filemanager",url:o,width:.8*r,height:.8*l})}}
function tinyImgsVdsMceCallback(){var e=parseInt(tinyMCE.majorVersion),n=window,i=document,t=i.documentElement,a=i.getElementsByTagName("body")[0],r=n.innerWidth||t.clientWidth||a.clientWidth,l=n.innerHeight||t.clientHeight||a.clientHeight,o=filemanager.baseUrl+"?editor=tinyMCE&file_type=imagevideo";if(4===e)tinyMCE.activeEditor.windowManager.open({file:o,title:"Filemanager",width:.8*r,height:.8*l,resizable:"yes",close_previous:"no"});else{if(5!==e)throw"TinyMCE version:"+e+" is not supported";tinyMCE.activeEditor.windowManager.openUrl({title:"Filemanager",url:o,width:.8*r,height:.8*l})}}
function tinyAnyMceCallback(){var e=parseInt(tinyMCE.majorVersion),n=window,i=document,t=i.documentElement,a=i.getElementsByTagName("body")[0],r=n.innerWidth||t.clientWidth||a.clientWidth,l=n.innerHeight||t.clientHeight||a.clientHeight,o=filemanager.baseUrl;if(4===e)tinyMCE.activeEditor.windowManager.open({file:o,title:"Filemanager",width:.8*r,height:.8*l,resizable:"yes",close_previous:"no"});else{if(5!==e)throw"TinyMCE version:"+e+" is not supported";tinyMCE.activeEditor.windowManager.openUrl({title:"Filemanager",url:o,width:.8*r,height:.8*l})}}
function tinyVideoMceCallback(){var e=parseInt(tinyMCE.majorVersion),n=window,i=document,t=i.documentElement,a=i.getElementsByTagName("body")[0],r=n.innerWidth||t.clientWidth||a.clientWidth,l=n.innerHeight||t.clientHeight||a.clientHeight,o=filemanager.baseUrl+"?editor=tinyMCE&file_type=video";if(4===e)tinyMCE.activeEditor.windowManager.open({file:o,title:"Filemanager",width:.8*r,height:.8*l,resizable:"yes",close_previous:"no"});else{if(5!==e)throw"TinyMCE version:"+e+" is not supported";tinyMCE.activeEditor.windowManager.openUrl({title:"Filemanager",url:o,width:.8*r,height:.8*l})}}
function tinyPdfMceCallback(){var e=parseInt(tinyMCE.majorVersion),n=window,i=document,t=i.documentElement,a=i.getElementsByTagName("body")[0],r=n.innerWidth||t.clientWidth||a.clientWidth,l=n.innerHeight||t.clientHeight||a.clientHeight,o=filemanager.baseUrl+"?editor=tinyMCE&file_type=pdf";if(4===e)tinyMCE.activeEditor.windowManager.open({file:o,title:"Filemanager",width:.8*r,height:.8*l,resizable:"yes",close_previous:"no"});else{if(5!==e)throw"TinyMCE version:"+e+" is not supported";tinyMCE.activeEditor.windowManager.openUrl({title:"Filemanager",url:o,width:.8*r,height:.8*l})}}

setTimeout(function(){filemanager.ckBrowseUrl=filemanager.baseUrl+"?editor=ckEditor"}),filemanager.openWindow=function(e){var n,i,t;e&&(t="toolbar=no,location=no,directories=no,status=no,menubar=no,resizable=yes,dependent=yes",t+=",width="+(n=.7*screen.width),t+=",height="+(i=.7*screen.height),t+=",left="+(screen.width-n)/2,t+=",top="+(screen.height-i)/2,window.open(e,"Filemanager",t))},filemanager.btnSummernote=function(n){return $.summernote.ui.button({contents:'<i class="fa fa-image"/> Filemanager',tooltip:"Pick a file",click:function(){console.log(n);var e=null;n.$note[0].className&&(e="."+n.$note[0].className),n.$note[0].id&&(e="#"+n.$note[0].id),filemanager.openWindow(filemanager.baseUrl+"?editor=summernote&note="+e)}}).render()},filemanager.tinyPdfMceCallback=tinyPdfMceCallback,filemanager.tinyMceCallback=tinyMceCallback,filemanager.tinyAnyMceCallback=tinyAnyMceCallback,filemanager.tinyVideoMceCallback=tinyVideoMceCallback,filemanager.tinyImgsVdsMceCallback=tinyImgsVdsMceCallback,filemanager.selectFile=function(e){var n;e&&(n=filemanager.baseUrl+"?&input_id="+e,filemanager.openWindow(n))},filemanager.bulkSelectFile=function(e){var n;e&&(n=filemanager.baseUrl+"?bulk=true&callback="+e,filemanager.openWindow(n))};